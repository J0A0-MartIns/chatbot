<div class="page-container">
    <div class="page-content">
        <h2><i class="fas fa-question-circle"></i> Quero Ajuda</h2>

        <form (ngSubmit)="enviarPergunta()">
            <label for="tema">Tema:</label>
            <select id="tema" [(ngModel)]="idTemaSelecionado" name="tema" (change)="onTemaChange()" required>
                <option [ngValue]="null">Selecione um tema</option>
                <option *ngFor="let t of temasDisponiveis" [ngValue]="t.id_tema">{{ t.nome }}</option>
            </select>

            <label for="subtema">Subtema:</label>
            <select id="subtema" [(ngModel)]="idSubtemaSelecionado" name="subtema" required [disabled]="!idTemaSelecionado">
                <option [ngValue]="null">Selecione um subtema</option>
                <option *ngFor="let st of subtemasDisponiveis" [ngValue]="st.id_subtema">{{ st.nome }}</option>
            </select>

            <label for="pergunta">Pergunta:</label>
            <textarea id="pergunta" [(ngModel)]="pergunta" name="pergunta" rows="4" required></textarea>

            <button type="submit" [disabled]="isLoading">
                <i class="fas fa-paper-plane"></i> {{ isLoading ? 'Enviando...' : 'Enviar' }}
            </button>
        </form>

        <div *ngIf="respostaChat" class="resposta-container">
            <h3>Resposta:</h3>
            <p class="resposta-texto">{{ respostaChat }}</p>

            <div class="avaliacao" *ngIf="!feedbackEnviado">
                <span>Esta resposta foi útil?</span>
                <button (click)="avaliar(true)" class="btn-util">Sim</button>
                <button (click)="avaliar(false)" class="btn-nao-util">Não</button>
            </div>
            <p *ngIf="feedbackEnviado" class="feedback-agradecimento"><strong>Obrigado pelo seu feedback!</strong></p>
        </div>
    </div>
</div>
